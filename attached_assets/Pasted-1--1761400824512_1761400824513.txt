1) Ядро паттерна (что точно обязательно)

Две свечи. Вторая свеча телом полностью поглощает реальное тело первой и имеет обратный цвет (бычье поглощение: зелёная 2-я накрывает красную 1-ю; медвежье — наоборот). Классика именно про тела, не про тени. 
Babypips.com
+1

Подтверждение входа чаще берут на пробой экстремума свечи-поглотителя (High для лонга, Low для шорта). Это самый распространённый консервативный триггер. 
Investopedia
+1

Важно отличать: «outside bar» (вторая свеча имеет и выше High, и ниже Low первой) — это паттерн «вне диапазона/наружный бар», он сильнее по диапазону, но не то же самое, что «engulfing телом». 
Quantified Strategies

Статистика (широкое исследование): у Бълковски медвежье поглощение действует как разворот в ~79% случаев, бычье — ~63% (на дневках акций; методика — свечные паттерны по бОльшей выборке). Это не «верняк», но подтверждает смысл паттерна. 
thepatternsite.com
+1

2) Геометрия и обязательные размеры (жёсткие правила)

Обозначения на текущем баре-поглотителе Bar₂ и предыдущем Bar₁:
Bᵢ = |Cᵢ−Oᵢ| — тело; Rᵢ = Hᵢ−Lᵢ — диапазон; ATR = ATR(n) (по закрытым барам).

Общие обязательные условия (для обеих сторон):

Поглощение телом:

Лонг (бычье): O₂ ≤ C₁ и C₂ ≥ O₁ (тело 2-й накрывает тело 1-й);

Шорт (медвежье): O₂ ≥ C₁ и C₂ ≤ O₁.
Усиление против «на волосок»: требуй запас γ·ATR по обе стороны (см. пороги ниже).

Цвет обязателен для режима «engulfing телом» (см. режимы в конце).

Импульсность Bar₂:

B₂ ≥ k_body · B₁ (вторая свеча заметно «сильнее» по телу),

B₂ ≥ k_ATR · ATR (не микро-тело),

Закрытие у края:
• для лонга (H₂−C₂)/R₂ ≤ edge_max,
• для шорта (C₂−L₂)/R₂ ≤ edge_max.

(Опционально, но очень желателно) Outside-фича: H₂ ≥ H₁ и L₂ ≤ L₁. Это превращает сетап в «наружный бар» + «engulfing телом» — заметно чище.

3) Условия отдельно для лонга/шорта

ЛОНГ (бычье поглощение)

O₂ ≤ C₁ − γ·ATR, C₂ ≥ O₁ + γ·ATR (запас к поглощению, чтобы не было «по касательной»).

Цвет: Bar₁ медвежий, Bar₂ бычий.

Закрытие у верха: (H₂−C₂)/R₂ ≤ edge_max.

Размер: B₂ ≥ k_body·B₁ и B₂ ≥ k_ATR·ATR.

ШОРТ (медвежье поглощение)

O₂ ≥ C₁ + γ·ATR, C₂ ≤ O₁ − γ·ATR.

Цвет: Bar₁ бычий, Bar₂ медвежий.

Закрытие у низа: (C₂−L₂)/R₂ ≤ edge_max.

Размер: B₂ ≥ k_body·B₁ и B₂ ≥ k_ATR·ATR.

4) Фильтры качества (сильно режут ложняк)

Тренд HTF (bias): для лонга — в контексте снижения (down-swing) или на поддержке; для шорта — после подъёма/у сопротивления. В любом случае подтверждение последующей свечой полезно (кандлы надёжнее с подтверждением). 
Investopedia

Уровень/зона: близость к S/R, Donchian-краю, PDH/PDL/PWH/PWL в пределах d·ATR.

Vol-подтверждение: Vol₂ ≥ k_vol · SMA(Vol, n); чем ниже ТФ, тем выше k_vol.

Анти-пила: требуй, чтобы закрытие Bar₂ также вышло за Donchian(M) (в сторону сделки) хотя бы на ε·ATR (см. M/ε ниже).

Doji-first guard (по желанию): если B₁/R₁ < 0.2 (почти дожи), считай сигнал только при k_body и k_ATR повыше (иначе это скорее «перехват» после паузы).

5) Входы, SL и тейки

Входы (триггеры):

Консервативный (рекомендую базово): вход после пробоя экстремума Bar₂ в сторону сделки (лонг: High₂, шорт: Low₂). Это и есть «подтверждение engulfing». 
Investopedia
+1

Агрессивный: по закрытию Bar₂ (если совпали сильные фильтры: уровень, объём, outside-бар, тренд).

Ретест-вход: откат к середине тела Bar₂ (mid-body 50%) или к поглощённой границе тела Bar₁ (O₁/C₁) → подтверждение удержания → вход.

Стоп-лосс:

A. За экстремум Bar₂ ± δ·ATR (лонг: ниже L₂; шорт: выше H₂). Универсально, компактно.

B. За «пробитую» границу тела Bar₁ ± δ·ATR (чуть шире; логично при ретест-входе).

C. За ближнюю S/R-зону ± δ·ATR (самый «толстый» SL, реже выбивает).

Тейки и сопровождение:

TP1 = 1R или ближайшая S/R в сторону сделки (что раньше).

После TP1: перевести SL в BE (или BE-0.25R, чтобы не «снимало» шумом).

TP2 = 2R или противоположный край локального диапазона/MB/Donchian.

Дальше: трейл по ATR-трейлу (k_trail·ATR, обычно 1.0–1.5) или за EMA20/локальные свинги.

Срок годности: если за N баров (обычно 1–3) не пошло продолжение — сигнал протух, выходим/пропускаем.

6) Пороговые значения по ТФ (старт, дальше докрутка по статистике)
Параметр	15m	1h	4h
γ — запас к поглощению телом (в ATR)	0.15–0.20	0.12–0.18	0.10–0.15
k_body — минимум *B₂/B₁*	1.3×	1.2×	1.1×
k_ATR — минимум тела Bar₂ в ATR	≥1.1×	≥1.0×	≥0.8×
edge_max — доля до края (закрытие у High/Low)	≤0.25	≤0.25	≤0.25
d — макс. дистанция до S/R (в ATR)	≤0.3	≤0.4	≤0.5
k_vol к SMA(Vol,20) (если есть объём)	≥1.3×	≥1.2×	≥1.1×
Donchian M для anti-пилы	12–14	14–16	10–14
ε — буфер к Donchian-краю (в ATR)	0.15–0.20	0.12–0.18	0.10–0.15
δ — буфер к SL (в ATR)	0.20–0.25	0.15–0.20	0.10–0.15
expiry_bars (протухание)	1–2	1–3	1–3
7) Сколько свечей нужно

Минимум: 2 (это и есть «поглощение»).

Консервативно: 3–4, если ждёшь подтверждение (пробой High/Low Bar₂ или ретест-подтверждение). 
Investopedia

8) Частые ложняки — чем резать

Почти-дожи Bar₁ → усили k_body и/или требуй outside-условие.

«Касательное» поглощение (почти без запаса) → добавь γ·ATR.

Микро-тело Bar₂ → включи k_ATR.

Флет/пила → Donchian-фильтр с M и ε.

Контр-тренд в середине рейнджа → требуй S/R-контекст и HTF-bias.

9) Режимы детекции (включаемые флаги в конфиге)

mode: body_engulf (основной) — обязателен обратный цвет + поглощение телом с запасом γ·ATR. (Это каноника.) 
Babypips.com
+1

mode: range_outside (усилитель) — дополнительно требовать H₂≥H₁ и L₂≤L₁ (наружный бар). 
Quantified Strategies